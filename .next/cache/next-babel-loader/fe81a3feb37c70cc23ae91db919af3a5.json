{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shbaita Studio\\\\Documents\\\\project\\\\new1\\\\themeforest-irsnufCS-redparts-auto-parts-react-ecommerce-template\\\\Sources\\\\src\\\\components\\\\shared\\\\Collapse.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n// react\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\n\nfunction Collapse(props) {\n  _s();\n\n  var _this = this;\n\n  var toggleClass = props.toggleClass,\n      render = props.render,\n      open = props.open;\n\n  var _useState = useState(false),\n      init = _useState[0],\n      setInit = _useState[1];\n\n  var itemRef = useRef(null);\n  var contentRef = useRef(null);\n  var expand = useCallback(function () {\n    var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var item = itemRef.current;\n    var content = contentRef.current || item;\n\n    if (!item || !content) {\n      return;\n    }\n\n    if (immediate) {\n      item.classList.add(toggleClass);\n      content.style.height = '';\n    } else {\n      var startHeight = content.getBoundingClientRect().height;\n      item.classList.add(toggleClass);\n      var endHeight = content.getBoundingClientRect().height;\n      content.style.height = \"\".concat(startHeight, \"px\");\n      content.getBoundingClientRect(); // force reflow\n\n      content.style.height = \"\".concat(endHeight, \"px\");\n\n      if (content.getBoundingClientRect().height === endHeight) {\n        content.style.height = '';\n      }\n    }\n  }, [toggleClass, itemRef, contentRef]);\n  var collapse = useCallback(function () {\n    var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var item = itemRef.current;\n    var content = contentRef.current || item;\n\n    if (!item || !content) {\n      return;\n    }\n\n    if (immediate) {\n      item.classList.remove(toggleClass);\n      content.style.height = '';\n    } else {\n      var startHeight = content.getBoundingClientRect().height;\n      content.style.height = \"\".concat(startHeight, \"px\");\n      item.classList.remove(toggleClass);\n      content.getBoundingClientRect(); // force reflow\n\n      content.style.height = '';\n    }\n  }, [toggleClass, itemRef, contentRef]);\n  var handleToggle = useCallback(function () {\n    var item = itemRef.current;\n\n    if (!item) {\n      return;\n    }\n\n    if (item.classList.contains(toggleClass)) {\n      collapse();\n    } else {\n      expand();\n    }\n  }, [expand, collapse, toggleClass, itemRef]);\n  useEffect(function () {\n    if (typeof open === 'boolean') {\n      if (open) {\n        expand(!init);\n      } else {\n        collapse(!init);\n      }\n    }\n\n    setInit(true);\n  }, [expand, collapse, open, init]);\n  useEffect(function () {\n    var item = itemRef.current;\n    var content = contentRef.current || item;\n\n    if (!content) {\n      return function () {};\n    }\n\n    var handleTransitionEnd = function handleTransitionEnd(event) {\n      if (content && event.propertyName === 'height') {\n        content.style.height = '';\n      }\n    };\n\n    content.addEventListener('transitionend', handleTransitionEnd);\n    return function () {\n      if (!content) {\n        return;\n      }\n\n      content.removeEventListener('transitionend', handleTransitionEnd);\n    };\n  }, []);\n  return useMemo(function () {\n    if (render) {\n      return __jsx(React.Fragment, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 17\n        }\n      }, render({\n        toggle: handleToggle,\n        setItemRef: itemRef,\n        setContentRef: contentRef\n      }));\n    }\n\n    return null;\n  }, [render, handleToggle, itemRef, contentRef]);\n}\n\n_s(Collapse, \"FK8ZyNMGaMjdGt6DANrTsAtUHok=\");\n\n_c = Collapse;\nexport default Collapse;\n\nvar _c;\n\n$RefreshReg$(_c, \"Collapse\");","map":{"version":3,"sources":["C:/Users/Shbaita Studio/Documents/project/new1/themeforest-irsnufCS-redparts-auto-parts-react-ecommerce-template/Sources/src/components/shared/Collapse.tsx"],"names":["React","useCallback","useEffect","useMemo","useRef","useState","Collapse","props","toggleClass","render","open","init","setInit","itemRef","contentRef","expand","immediate","item","current","content","classList","add","style","height","startHeight","getBoundingClientRect","endHeight","collapse","remove","handleToggle","contains","handleTransitionEnd","event","propertyName","addEventListener","removeEventListener","toggle","setItemRef","setContentRef"],"mappings":"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","sourcesContent":["// react\nimport React, {\n    useCallback,\n    useEffect,\n    useMemo,\n    useRef,\n    useState,\n} from 'react';\n\nexport interface ICollapseRenderFnData<T extends HTMLElement, P extends HTMLElement> {\n    toggle: () => void;\n    setItemRef: React.Ref<T>;\n    setContentRef: React.Ref<P>;\n}\n\nexport type ICollapseRenderFn<T extends HTMLElement, P extends HTMLElement>\n    = (data: ICollapseRenderFnData<T, P>) => React.ReactNode;\n\ninterface Props<T extends HTMLElement, P extends HTMLElement> {\n    toggleClass: string;\n    render: ICollapseRenderFn<T, P>;\n    open?: boolean;\n}\n\nfunction Collapse<T extends HTMLElement, P extends HTMLElement>(props: Props<T, P>) {\n    const { toggleClass, render, open } = props;\n    const [init, setInit] = useState(false);\n    const itemRef = useRef<T>(null);\n    const contentRef = useRef<P>(null);\n\n    const expand = useCallback((immediate = false) => {\n        const item = itemRef.current;\n        const content = contentRef.current || item;\n\n        if (!item || !content) {\n            return;\n        }\n\n        if (immediate) {\n            item.classList.add(toggleClass);\n            content.style.height = '';\n        } else {\n            const startHeight = content.getBoundingClientRect().height;\n\n            item.classList.add(toggleClass);\n\n            const endHeight = content.getBoundingClientRect().height;\n\n            content.style.height = `${startHeight}px`;\n            content.getBoundingClientRect(); // force reflow\n            content.style.height = `${endHeight}px`;\n\n            if (content.getBoundingClientRect().height === endHeight) {\n                content.style.height = '';\n            }\n        }\n    }, [toggleClass, itemRef, contentRef]);\n\n    const collapse = useCallback((immediate = false) => {\n        const item = itemRef.current;\n        const content = contentRef.current || item;\n\n        if (!item || !content) {\n            return;\n        }\n\n        if (immediate) {\n            item.classList.remove(toggleClass);\n            content.style.height = '';\n        } else {\n            const startHeight = content.getBoundingClientRect().height;\n\n            content.style.height = `${startHeight}px`;\n            item.classList.remove(toggleClass);\n\n            content.getBoundingClientRect(); // force reflow\n            content.style.height = '';\n        }\n    }, [toggleClass, itemRef, contentRef]);\n\n    const handleToggle = useCallback(() => {\n        const item = itemRef.current;\n\n        if (!item) {\n            return;\n        }\n\n        if (item.classList.contains(toggleClass)) {\n            collapse();\n        } else {\n            expand();\n        }\n    }, [expand, collapse, toggleClass, itemRef]);\n\n    useEffect(() => {\n        if (typeof open === 'boolean') {\n            if (open) {\n                expand(!init);\n            } else {\n                collapse(!init);\n            }\n        }\n\n        setInit(true);\n    }, [expand, collapse, open, init]);\n\n    useEffect(() => {\n        const item = itemRef.current;\n        const content = contentRef.current || item;\n\n        if (!content) {\n            return () => {};\n        }\n\n        const handleTransitionEnd = (event: TransitionEvent) => {\n            if (content && event.propertyName === 'height') {\n                content.style.height = '';\n            }\n        };\n\n        content.addEventListener('transitionend', handleTransitionEnd);\n\n        return () => {\n            if (!content) {\n                return;\n            }\n\n            content.removeEventListener('transitionend', handleTransitionEnd);\n        };\n    }, []);\n\n    return useMemo(() => {\n        if (render) {\n            return (\n                <React.Fragment>\n                    {render({\n                        toggle: handleToggle,\n                        setItemRef: itemRef,\n                        setContentRef: contentRef,\n                    })}\n                </React.Fragment>\n            );\n        }\n\n        return null;\n    }, [render, handleToggle, itemRef, contentRef]);\n}\n\nexport default Collapse;\n"]},"metadata":{},"sourceType":"module"}