{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// third-party\n// application\nimport { useAppAction } from '~/store/hooks';\nconst APPLY_CLIENT_STATE = 'APPLY_CLIENT_STATE';\n\nfunction isApplyClientStateAction(action) {\n  return action.type === APPLY_CLIENT_STATE;\n}\n\nexport function applyClientState(state) {\n  return {\n    type: APPLY_CLIENT_STATE,\n    state\n  };\n}\nexport const useApplyClientState = () => useAppAction(applyClientState);\nexport function withClientState(reducer, namespace) {\n  return (state, action) => {\n    const childState = reducer(state, action);\n\n    if (isApplyClientStateAction(action)) {\n      return _objectSpread(_objectSpread({}, action.state[namespace] || childState), {}, {\n        stateFrom: 'client'\n      });\n    }\n\n    if ('stateFrom' in childState) {\n      return childState;\n    }\n\n    return _objectSpread(_objectSpread({}, childState), {}, {\n      stateFrom: 'server'\n    });\n  };\n}","map":{"version":3,"sources":["C:/Users/Shbaita Studio/Documents/project/new1/themeforest-irsnufCS-redparts-auto-parts-react-ecommerce-template/Sources/src/store/client.ts"],"names":["useAppAction","APPLY_CLIENT_STATE","isApplyClientStateAction","action","type","applyClientState","state","useApplyClientState","withClientState","reducer","namespace","childState","stateFrom"],"mappings":";;;;;;AAAA;AAEA;AAEA,SAASA,YAAT,QAA6B,eAA7B;AAEA,MAAMC,kBAAkB,GAAG,oBAA3B;;AAOA,SAASC,wBAAT,CAAiDC,MAAjD,EAAsG;AAClG,SAAOA,MAAM,CAACC,IAAP,KAAgBH,kBAAvB;AACH;;AAED,OAAO,SAASI,gBAAT,CAA4CC,KAA5C,EAAiF;AACpF,SAAO;AACHF,IAAAA,IAAI,EAAEH,kBADH;AAEHK,IAAAA;AAFG,GAAP;AAIH;AAED,OAAO,MAAMC,mBAAmB,GAAG,MAAMP,YAAY,CAACK,gBAAD,CAA9C;AAMP,OAAO,SAASG,eAAT,CAKHC,OALG,EAQHC,SARG,EASU;AACb,SAAO,CAACJ,KAAD,EAAWH,MAAX,KAAiF;AACpF,UAAMQ,UAAU,GAAGF,OAAO,CAACH,KAAD,EAAQH,MAAR,CAA1B;;AAEA,QAAID,wBAAwB,CAACC,MAAD,CAA5B,EAAsC;AAClC,6CACQA,MAAM,CAACG,KAAP,CAAaI,SAAb,KAA2BC,UADnC;AAEIC,QAAAA,SAAS,EAAE;AAFf;AAIH;;AAED,QAAI,eAAeD,UAAnB,EAA+B;AAC3B,aAAOA,UAAP;AACH;;AAED,2CACOA,UADP;AAEIC,MAAAA,SAAS,EAAE;AAFf;AAIH,GAlBD;AAmBH","sourcesContent":["// third-party\nimport { Action } from 'redux';\n// application\nimport { AppReducer } from '~/store/types';\nimport { useAppAction } from '~/store/hooks';\n\nconst APPLY_CLIENT_STATE = 'APPLY_CLIENT_STATE';\n\ntype ApplyClientStateAction<T> = {\n    type: typeof APPLY_CLIENT_STATE;\n    state: T;\n};\n\nfunction isApplyClientStateAction<T extends any>(action: Action): action is ApplyClientStateAction<T> {\n    return action.type === APPLY_CLIENT_STATE;\n}\n\nexport function applyClientState<T extends object>(state: T): ApplyClientStateAction<T> {\n    return {\n        type: APPLY_CLIENT_STATE,\n        state,\n    };\n}\n\nexport const useApplyClientState = () => useAppAction(applyClientState);\n\nexport type IStateFromServer = 'server';\nexport type IStateFromClient = 'client';\nexport type IStateFrom = IStateFromServer | IStateFromClient;\n\nexport function withClientState<\n    T extends AppReducer<any, any>,\n    S extends ReturnType<T>,\n    R extends S & { stateFrom: IStateFrom }\n>(\n    reducer: T extends AppReducer<ReturnType<T> & { stateFrom: any }, any>\n        ? AppReducer<ReturnType<T> & { stateFrom: never }, any>\n        : T,\n    namespace: string,\n): AppReducer<R> {\n    return (state: S, action: Action | ApplyClientStateAction<{ [ns: string]: any }>): R => {\n        const childState = reducer(state, action);\n\n        if (isApplyClientStateAction(action)) {\n            return {\n                ...(action.state[namespace] || childState),\n                stateFrom: 'client',\n            };\n        }\n\n        if ('stateFrom' in childState) {\n            return childState;\n        }\n\n        return {\n            ...childState,\n            stateFrom: 'server',\n        };\n    };\n}\n"]},"metadata":{},"sourceType":"module"}