{"ast":null,"code":"/* eslint-disable import/prefer-default-export */\n// application\nimport { delayResponse } from '~/fake-server/utils';\nimport { products } from '~/fake-server/database/products';\nimport { getNextOrderId, getNextOrderNumber, getOrderToken, orders } from '~/fake-server/database/orders';\nexport function checkout(data) {\n  var id = getNextOrderId();\n  var items = data.items.map(function (x) {\n    var product = products.find(function (p) {\n      return p.id === x.productId;\n    });\n\n    if (!product) {\n      throw new Error('Product not found');\n    }\n\n    return {\n      product: product,\n      options: x.options,\n      price: product.price,\n      quantity: x.quantity,\n      total: product.price * x.quantity\n    };\n  });\n  var quantity = items.reduce(function (acc, x) {\n    return acc + x.quantity;\n  }, 0);\n  var subtotal = items.reduce(function (acc, x) {\n    return acc + x.total;\n  }, 0);\n  var totals = [{\n    title: 'SHIPPING',\n    price: 25\n  }, {\n    title: 'TAX',\n    price: subtotal * 0.20\n  }];\n  var total = subtotal + totals.reduce(function (acc, x) {\n    return acc + x.price;\n  }, 0);\n  var date = new Date();\n\n  var pad = function pad(v) {\n    return \"00\".concat(v).substr(-2);\n  };\n\n  var createdAt = \"\".concat(date.getFullYear(), \"-\").concat(pad(date.getMonth() + 1), \"-\").concat(pad(date.getDate()));\n  var order = {\n    id: id,\n    token: getOrderToken(id),\n    number: getNextOrderNumber(),\n    createdAt: createdAt,\n    payment: data.payment,\n    status: 'PENDING',\n    items: items,\n    quantity: quantity,\n    subtotal: subtotal,\n    totals: totals,\n    total: total,\n    billingAddress: data.billingAddress,\n    shippingAddress: data.shippingAddress\n  };\n  orders.unshift(order);\n  return delayResponse(Promise.resolve(order));\n}","map":{"version":3,"sources":["C:/Users/Shbaita Studio/Documents/project/new1/themeforest-irsnufCS-redparts-auto-parts-react-ecommerce-template/Sources/src/fake-server/endpoints/checkout.ts"],"names":["delayResponse","products","getNextOrderId","getNextOrderNumber","getOrderToken","orders","checkout","data","id","items","map","x","product","find","p","productId","Error","options","price","quantity","total","reduce","acc","subtotal","totals","title","date","Date","pad","v","substr","createdAt","getFullYear","getMonth","getDate","order","token","number","payment","status","billingAddress","shippingAddress","unshift","Promise","resolve"],"mappings":"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","sourcesContent":["/* eslint-disable import/prefer-default-export */\n\n// application\nimport { delayResponse } from '~/fake-server/utils';\nimport { ICheckoutData } from '~/api/base';\nimport { IOrder, IOrderItem, IOrderTotal } from '~/interfaces/order';\nimport { products } from '~/fake-server/database/products';\nimport {\n    getNextOrderId,\n    getNextOrderNumber,\n    getOrderToken,\n    orders,\n} from '~/fake-server/database/orders';\n\nexport function checkout(data: ICheckoutData): Promise<IOrder> {\n    const id = getNextOrderId();\n    const items: IOrderItem[] = data.items.map((x) => {\n        const product = products.find((p) => p.id === x.productId);\n\n        if (!product) {\n            throw new Error('Product not found');\n        }\n\n        return {\n            product,\n            options: x.options,\n            price: product.price,\n            quantity: x.quantity,\n            total: product.price * x.quantity,\n        };\n    });\n    const quantity = items.reduce((acc, x) => acc + x.quantity, 0);\n    const subtotal = items.reduce((acc, x) => acc + x.total, 0);\n    const totals: IOrderTotal[] = [\n        {\n            title: 'SHIPPING',\n            price: 25,\n        },\n        {\n            title: 'TAX',\n            price: subtotal * 0.20,\n        },\n    ];\n    const total = subtotal + totals.reduce((acc, x) => acc + x.price, 0);\n\n    const date = new Date();\n    const pad = (v: number) => (`00${v}`).substr(-2);\n    const createdAt = `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(date.getDate())}`;\n\n    const order: IOrder = {\n        id,\n        token: getOrderToken(id),\n        number: getNextOrderNumber(),\n        createdAt,\n        payment: data.payment,\n        status: 'PENDING',\n        items,\n        quantity,\n        subtotal,\n        totals,\n        total,\n        billingAddress: data.billingAddress,\n        shippingAddress: data.shippingAddress,\n    };\n\n    orders.unshift(order);\n\n    return delayResponse(Promise.resolve(order));\n}\n"]},"metadata":{},"sourceType":"module"}