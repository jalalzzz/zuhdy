{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shbaita Studio\\\\Documents\\\\project\\\\new1\\\\themeforest-irsnufCS-redparts-auto-parts-react-ecommerce-template\\\\Sources\\\\src\\\\components\\\\mobile\\\\MobileHeader.tsx\";\nvar __jsx = React.createElement;\n// react\nimport React, { useRef, useState } from 'react'; // third-party\n\nimport classNames from 'classnames';\nimport { FormattedMessage, useIntl } from 'react-intl'; // application\n\nimport AppLink from '~/components/shared/AppLink';\nimport MobileLogo from '~/components/mobile/MobileLogo';\nimport url from '~/services/url';\nimport VehiclePickerModal from '~/components/shared/VehiclePickerModal';\nimport { useCart } from '~/store/cart/cartHooks';\nimport { useGarageCurrent, useGarageSetCurrent } from '~/store/garage/garageHooks';\nimport { useGlobalMousedown } from '~/services/hooks';\nimport { useMobileMenuOpen } from '~/store/mobile-menu/mobileMenuHooks';\nimport { useWishlist } from '~/store/wishlist/wishlistHooks';\nimport { Car20Svg, Cart20Svg, Cross20Svg, Heart20Svg, Menu18x14Svg, Person20Svg, Search20Svg } from '~/svg';\n\nfunction MobileHeader() {\n  const intl = useIntl();\n  const mobileMenuOpen = useMobileMenuOpen();\n  const wishlist = useWishlist();\n  const cart = useCart();\n  const vehicle = useGarageCurrent();\n  const garageSetCurrent = useGarageSetCurrent();\n  const searchFormRef = useRef(null);\n  const searchInputRef = useRef(null);\n  const searchIndicatorRef = useRef(null);\n  const {\n    0: searchIsOpen,\n    1: setSearchIsOpen\n  } = useState(false);\n  const {\n    0: vehiclePickerIsOpen,\n    1: setVehiclePickerIsOpen\n  } = useState(false);\n\n  const openSearch = () => {\n    setSearchIsOpen(true);\n\n    if (searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n  };\n\n  const closeSearch = () => {\n    setSearchIsOpen(false);\n  };\n\n  const openVehiclePicker = () => {\n    setVehiclePickerIsOpen(true);\n  };\n\n  const onVehiclePickerClose = () => {\n    setVehiclePickerIsOpen(false);\n\n    if (searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n  };\n\n  const onVehiclePickerSelect = selectedVehicle => {\n    garageSetCurrent((selectedVehicle === null || selectedVehicle === void 0 ? void 0 : selectedVehicle.id) || null);\n  };\n\n  const onSearchSubmit = event => {\n    event.preventDefault();\n  };\n\n  useGlobalMousedown(event => {\n    const outsideIndicator = searchIndicatorRef.current && !searchIndicatorRef.current.contains(event.target);\n    const outsideForm = searchFormRef.current && !searchFormRef.current.contains(event.target);\n\n    if (outsideIndicator && outsideForm) {\n      if (searchIsOpen && !vehiclePickerIsOpen) {\n        closeSearch();\n      }\n    }\n  }, [searchFormRef, searchIndicatorRef, searchIsOpen, vehiclePickerIsOpen]);\n  const searchPlaceholder = vehicle ? intl.formatMessage({\n    id: 'INPUT_SEARCH_PLACEHOLDER_VEHICLE'\n  }, vehicle) : intl.formatMessage({\n    id: 'INPUT_SEARCH_PLACEHOLDER'\n  });\n  return __jsx(\"div\", {\n    className: \"mobile-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, __jsx(VehiclePickerModal, {\n    value: vehicle,\n    isOpen: vehiclePickerIsOpen,\n    onClose: onVehiclePickerClose,\n    onSelect: onVehiclePickerSelect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"mobile-header__body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, __jsx(\"button\", {\n    className: \"mobile-header__menu-button\",\n    type: \"button\",\n    onClick: mobileMenuOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, __jsx(Menu18x14Svg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 25\n    }\n  })), __jsx(AppLink, {\n    href: url.home(),\n    className: \"mobile-header__logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }, __jsx(MobileLogo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  })), __jsx(\"div\", {\n    ref: searchFormRef,\n    className: classNames('mobile-header__search mobile-search', {\n      'mobile-header__search--open': searchIsOpen\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, __jsx(\"form\", {\n    className: \"mobile-search__body\",\n    onSubmit: onSearchSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    className: \"sr-only\",\n    htmlFor: \"mobile-site-search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"INPUT_SEARCH_LABEL\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 33\n    }\n  })), __jsx(\"input\", {\n    ref: searchInputRef,\n    type: \"text\",\n    id: \"mobile-site-search\",\n    className: \"mobile-search__input\",\n    placeholder: searchPlaceholder,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  }), __jsx(\"button\", {\n    type: \"button\",\n    className: \"mobile-search__vehicle-picker\",\n    onClick: openVehiclePicker,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 29\n    }\n  }, __jsx(Car20Svg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 33\n    }\n  }), __jsx(\"span\", {\n    className: \"mobile-search__vehicle-picker-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 33\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"BUTTON_SEARCH_SELECT_VEHICLE_MOBILE\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 37\n    }\n  }))), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"mobile-search__button mobile-search__button--search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 29\n    }\n  }, __jsx(Search20Svg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 33\n    }\n  })), __jsx(\"button\", {\n    type: \"button\",\n    className: \"mobile-search__button mobile-search__button--close\",\n    onClick: closeSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 29\n    }\n  }, __jsx(Cross20Svg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 33\n    }\n  })), __jsx(\"div\", {\n    className: \"mobile-search__field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 29\n    }\n  }))), __jsx(\"div\", {\n    className: \"mobile-header__indicators\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"mobile-indicator d-md-none\",\n    ref: searchIndicatorRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 25\n    }\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"mobile-indicator__button\",\n    onClick: openSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 29\n    }\n  }, __jsx(\"span\", {\n    className: \"mobile-indicator__icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 33\n    }\n  }, __jsx(Search20Svg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 37\n    }\n  })))), __jsx(\"div\", {\n    className: \"mobile-indicator d-none d-md-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 25\n    }\n  }, __jsx(AppLink, {\n    href: url.accountDashboard(),\n    className: \"mobile-indicator__button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 29\n    }\n  }, __jsx(\"span\", {\n    className: \"mobile-indicator__icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 33\n    }\n  }, __jsx(Person20Svg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 37\n    }\n  })))), __jsx(\"div\", {\n    className: \"mobile-indicator d-none d-md-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 25\n    }\n  }, __jsx(AppLink, {\n    href: url.wishlist(),\n    className: \"mobile-indicator__button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 29\n    }\n  }, __jsx(\"span\", {\n    className: \"mobile-indicator__icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 33\n    }\n  }, __jsx(Heart20Svg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 37\n    }\n  }), wishlist.items.length > 0 && __jsx(\"span\", {\n    className: \"mobile-indicator__counter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 41\n    }\n  }, wishlist.items.length)))), __jsx(\"div\", {\n    className: \"mobile-indicator\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 25\n    }\n  }, __jsx(AppLink, {\n    href: url.cart(),\n    className: \"mobile-indicator__button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 29\n    }\n  }, __jsx(\"span\", {\n    className: \"mobile-indicator__icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 33\n    }\n  }, __jsx(Cart20Svg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 37\n    }\n  }), cart.quantity > 0 && __jsx(\"span\", {\n    className: \"mobile-indicator__counter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 41\n    }\n  }, cart.quantity))))))));\n}\n\nexport default React.memo(MobileHeader);","map":{"version":3,"sources":["C:/Users/Shbaita Studio/Documents/project/new1/themeforest-irsnufCS-redparts-auto-parts-react-ecommerce-template/Sources/src/components/mobile/MobileHeader.tsx"],"names":["React","useRef","useState","classNames","FormattedMessage","useIntl","AppLink","MobileLogo","url","VehiclePickerModal","useCart","useGarageCurrent","useGarageSetCurrent","useGlobalMousedown","useMobileMenuOpen","useWishlist","Car20Svg","Cart20Svg","Cross20Svg","Heart20Svg","Menu18x14Svg","Person20Svg","Search20Svg","MobileHeader","intl","mobileMenuOpen","wishlist","cart","vehicle","garageSetCurrent","searchFormRef","searchInputRef","searchIndicatorRef","searchIsOpen","setSearchIsOpen","vehiclePickerIsOpen","setVehiclePickerIsOpen","openSearch","current","focus","closeSearch","openVehiclePicker","onVehiclePickerClose","onVehiclePickerSelect","selectedVehicle","id","onSearchSubmit","event","preventDefault","outsideIndicator","contains","target","outsideForm","searchPlaceholder","formatMessage","home","accountDashboard","items","length","quantity","memo"],"mappings":"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","sourcesContent":["// react\nimport React, { useRef, useState } from 'react';\n// third-party\nimport classNames from 'classnames';\nimport { FormattedMessage, useIntl } from 'react-intl';\n// application\nimport AppLink from '~/components/shared/AppLink';\nimport MobileLogo from '~/components/mobile/MobileLogo';\nimport url from '~/services/url';\nimport VehiclePickerModal from '~/components/shared/VehiclePickerModal';\nimport { IVehicle } from '~/interfaces/vehicle';\nimport { useCart } from '~/store/cart/cartHooks';\nimport { useGarageCurrent, useGarageSetCurrent } from '~/store/garage/garageHooks';\nimport { useGlobalMousedown } from '~/services/hooks';\nimport { useMobileMenuOpen } from '~/store/mobile-menu/mobileMenuHooks';\nimport { useWishlist } from '~/store/wishlist/wishlistHooks';\nimport {\n    Car20Svg,\n    Cart20Svg,\n    Cross20Svg,\n    Heart20Svg,\n    Menu18x14Svg,\n    Person20Svg,\n    Search20Svg,\n} from '~/svg';\n\nfunction MobileHeader() {\n    const intl = useIntl();\n    const mobileMenuOpen = useMobileMenuOpen();\n    const wishlist = useWishlist();\n    const cart = useCart();\n    const vehicle: Enumerable<IVehicle> | null = useGarageCurrent();\n    const garageSetCurrent = useGarageSetCurrent();\n    const searchFormRef = useRef<HTMLDivElement | null>(null);\n    const searchInputRef = useRef<HTMLInputElement | null>(null);\n    const searchIndicatorRef = useRef<HTMLDivElement | null>(null);\n    const [searchIsOpen, setSearchIsOpen] = useState(false);\n    const [vehiclePickerIsOpen, setVehiclePickerIsOpen] = useState(false);\n\n    const openSearch = () => {\n        setSearchIsOpen(true);\n\n        if (searchInputRef.current) {\n            searchInputRef.current.focus();\n        }\n    };\n\n    const closeSearch = () => {\n        setSearchIsOpen(false);\n    };\n\n    const openVehiclePicker = () => {\n        setVehiclePickerIsOpen(true);\n    };\n\n    const onVehiclePickerClose = () => {\n        setVehiclePickerIsOpen(false);\n\n        if (searchInputRef.current) {\n            searchInputRef.current.focus();\n        }\n    };\n\n    const onVehiclePickerSelect = (selectedVehicle: IVehicle | null) => {\n        garageSetCurrent(selectedVehicle?.id || null);\n    };\n\n    const onSearchSubmit = (event: React.FormEvent) => {\n        event.preventDefault();\n    };\n\n    useGlobalMousedown((event) => {\n        const outsideIndicator = (\n            searchIndicatorRef.current\n            && !searchIndicatorRef.current.contains(event.target as HTMLElement)\n        );\n        const outsideForm = (\n            searchFormRef.current\n            && !searchFormRef.current.contains(event.target as HTMLElement)\n        );\n\n        if (outsideIndicator && outsideForm) {\n            if (searchIsOpen && !vehiclePickerIsOpen) {\n                closeSearch();\n            }\n        }\n    }, [searchFormRef, searchIndicatorRef, searchIsOpen, vehiclePickerIsOpen]);\n\n    const searchPlaceholder = vehicle\n        ? intl.formatMessage({ id: 'INPUT_SEARCH_PLACEHOLDER_VEHICLE' }, vehicle)\n        : intl.formatMessage({ id: 'INPUT_SEARCH_PLACEHOLDER' });\n\n    return (\n        <div className=\"mobile-header\">\n            <VehiclePickerModal\n                value={vehicle}\n                isOpen={vehiclePickerIsOpen}\n                onClose={onVehiclePickerClose}\n                onSelect={onVehiclePickerSelect}\n            />\n\n            <div className=\"container\">\n                <div className=\"mobile-header__body\">\n                    <button\n                        className=\"mobile-header__menu-button\"\n                        type=\"button\"\n                        onClick={mobileMenuOpen}\n                    >\n                        <Menu18x14Svg />\n                    </button>\n                    <AppLink href={url.home()} className=\"mobile-header__logo\">\n                        <MobileLogo />\n                    </AppLink>\n                    <div\n                        ref={searchFormRef}\n                        className={classNames('mobile-header__search mobile-search', {\n                            'mobile-header__search--open': searchIsOpen,\n                        })}\n                    >\n                        <form className=\"mobile-search__body\" onSubmit={onSearchSubmit}>\n                            <label className=\"sr-only\" htmlFor=\"mobile-site-search\">\n                                <FormattedMessage id=\"INPUT_SEARCH_LABEL\" />\n                            </label>\n                            <input\n                                ref={searchInputRef}\n                                type=\"text\"\n                                id=\"mobile-site-search\"\n                                className=\"mobile-search__input\"\n                                placeholder={searchPlaceholder}\n                            />\n                            <button\n                                type=\"button\"\n                                className=\"mobile-search__vehicle-picker\"\n                                onClick={openVehiclePicker}\n                            >\n                                <Car20Svg />\n                                <span className=\"mobile-search__vehicle-picker-label\">\n                                    <FormattedMessage id=\"BUTTON_SEARCH_SELECT_VEHICLE_MOBILE\" />\n                                </span>\n                            </button>\n                            <button type=\"submit\" className=\"mobile-search__button mobile-search__button--search\">\n                                <Search20Svg />\n                            </button>\n                            <button\n                                type=\"button\"\n                                className=\"mobile-search__button mobile-search__button--close\"\n                                onClick={closeSearch}\n                            >\n                                <Cross20Svg />\n                            </button>\n                            <div className=\"mobile-search__field\" />\n                        </form>\n                    </div>\n                    <div className=\"mobile-header__indicators\">\n                        <div className=\"mobile-indicator d-md-none\" ref={searchIndicatorRef}>\n                            <button type=\"button\" className=\"mobile-indicator__button\" onClick={openSearch}>\n                                <span className=\"mobile-indicator__icon\">\n                                    <Search20Svg />\n                                </span>\n                            </button>\n                        </div>\n                        <div className=\"mobile-indicator d-none d-md-block\">\n                            <AppLink href={url.accountDashboard()} className=\"mobile-indicator__button\">\n                                <span className=\"mobile-indicator__icon\">\n                                    <Person20Svg />\n                                </span>\n                            </AppLink>\n                        </div>\n                        <div className=\"mobile-indicator d-none d-md-block\">\n                            <AppLink href={url.wishlist()} className=\"mobile-indicator__button\">\n                                <span className=\"mobile-indicator__icon\">\n                                    <Heart20Svg />\n                                    {wishlist.items.length > 0 && (\n                                        <span className=\"mobile-indicator__counter\">\n                                            {wishlist.items.length}\n                                        </span>\n                                    )}\n                                </span>\n                            </AppLink>\n                        </div>\n                        <div className=\"mobile-indicator\">\n                            <AppLink href={url.cart()} className=\"mobile-indicator__button\">\n                                <span className=\"mobile-indicator__icon\">\n                                    <Cart20Svg />\n                                    {cart.quantity > 0 && (\n                                        <span className=\"mobile-indicator__counter\">\n                                            {cart.quantity}\n                                        </span>\n                                    )}\n                                </span>\n                            </AppLink>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default React.memo(MobileHeader);\n"]},"metadata":{},"sourceType":"module"}