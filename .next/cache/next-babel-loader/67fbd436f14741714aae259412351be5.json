{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Shbaita Studio\\\\Documents\\\\project\\\\new1\\\\themeforest-irsnufCS-redparts-auto-parts-react-ecommerce-template\\\\Sources\\\\src\\\\components\\\\shared\\\\VehiclePickerModal.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n// react\nimport React, { useCallback, useEffect, useState } from 'react'; // third-party\n\nimport classNames from 'classnames';\nimport { FormattedMessage } from 'react-intl';\nimport { Modal } from 'reactstrap'; // application\n\nimport AsyncAction from '~/components/shared/AsyncAction';\nimport RadioButton from '~/components/shared/RadioButton';\nimport VehicleForm from '~/components/shared/VehicleForm';\nimport { Cross12Svg, RecycleBin16Svg } from '~/svg';\nimport { useGarageAddItem, useGarageRemoveItem, useUserVehicles } from '~/store/garage/garageHooks';\n\nfunction VehiclePickerModal(props) {\n  _s();\n\n  var _this = this;\n\n  var _props$value = props.value,\n      value = _props$value === void 0 ? null : _props$value,\n      _props$isOpen = props.isOpen,\n      isOpen = _props$isOpen === void 0 ? false : _props$isOpen,\n      onClose = props.onClose,\n      onSelect = props.onSelect;\n  var vehicles = useUserVehicles();\n  var garageRemoveItem = useGarageRemoveItem();\n  var garageAddItem = useGarageAddItem();\n\n  var _useState = useState('list'),\n      currentPanel = _useState[0],\n      setCurrentPanel = _useState[1];\n\n  var _useState2 = useState(null),\n      innerValue = _useState2[0],\n      setInnerValue = _useState2[1];\n\n  var _useState3 = useState(null),\n      controlValue = _useState3[0],\n      setControlValue = _useState3[1];\n\n  var onSelectClick = function onSelectClick() {\n    if (onSelect) {\n      onSelect(innerValue);\n    }\n\n    if (onClose) {\n      onClose();\n    }\n  };\n\n  var toggle = useCallback(function () {\n    if (isOpen && onClose) {\n      onClose();\n    }\n  }, [isOpen, onClose]);\n\n  var onAddVehicleClick = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (controlValue) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              _context.next = 4;\n              return garageAddItem(controlValue.id);\n\n            case 4:\n              setCurrentPanel('list');\n              setInnerValue(controlValue);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onAddVehicleClick() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    if (isOpen) {\n      setCurrentPanel('list');\n      setInnerValue(value);\n    }\n  }, [isOpen, value]);\n  return __jsx(Modal, {\n    isOpen: isOpen,\n    toggle: toggle,\n    centered: true,\n    className: \"vehicle-picker-modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"vehicle-picker-modal__close\",\n    onClick: onClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, __jsx(Cross12Svg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    className: classNames('vehicle-picker-modal__panel', {\n      'vehicle-picker-modal__panel--active': currentPanel === 'list' && vehicles.length !== 0\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"vehicle-picker-modal__title card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"HEADER_SELECT_VEHICLE\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  })), __jsx(\"div\", {\n    className: \"vehicle-picker-modal__text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"TEXT_SELECT_VEHICLE_TO_FIND_EXACT_FIT_PARTS\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  })), __jsx(\"div\", {\n    className: \"vehicles-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"vehicles-list__body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    className: \"vehicles-list__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  }, __jsx(RadioButton, {\n    className: \"vehicles-list__item-radio\",\n    checked: innerValue === null,\n    onChange: function onChange() {\n      return setInnerValue(null);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 29\n    }\n  }), __jsx(\"span\", {\n    className: \"vehicles-list__item-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 29\n    }\n  }, __jsx(\"span\", {\n    className: \"vehicles-list__item-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 33\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"TEXT_ALL_VEHICLES\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 37\n    }\n  })))), vehicles.map(function (vehicle, vehicleIdx) {\n    return (// eslint-disable-next-line jsx-a11y/label-has-associated-control\n      __jsx(\"label\", {\n        key: vehicleIdx,\n        className: \"vehicles-list__item\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 29\n        }\n      }, __jsx(RadioButton, {\n        className: \"vehicles-list__item-radio\",\n        checked: innerValue !== null && innerValue.id === vehicle.id,\n        onChange: function onChange() {\n          return setInnerValue(vehicle);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 33\n        }\n      }), __jsx(\"span\", {\n        className: \"vehicles-list__item-info\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 33\n        }\n      }, __jsx(\"span\", {\n        className: \"vehicles-list__item-name\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 37\n        }\n      }, \"\".concat(vehicle.year, \" \").concat(vehicle.make, \" \").concat(vehicle.model)), __jsx(\"span\", {\n        className: \"vehicles-list__item-details\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 37\n        }\n      }, __jsx(FormattedMessage, {\n        id: \"TEXT_VEHICLE_ENGINE\",\n        values: {\n          engine: vehicle.engine\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 41\n        }\n      }))), __jsx(AsyncAction, {\n        action: function action() {\n          return garageRemoveItem(vehicle.id);\n        },\n        render: function render(_ref2) {\n          var run = _ref2.run,\n              loading = _ref2.loading;\n          return __jsx(\"button\", {\n            type: \"button\",\n            className: classNames('vehicles-list__item-remove', {\n              'vehicles-list__item-remove--loading': loading\n            }),\n            onClick: run,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 41\n            }\n          }, __jsx(RecycleBin16Svg, {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 45\n            }\n          }));\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 33\n        }\n      }))\n    );\n  }))), __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn btn-sm btn-secondary btn-block mt-2 vehicle-picker-modal__add-button\",\n    onClick: function onClick() {\n      return setCurrentPanel('form');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"BUTTON_ADD_VEHICLE_LONG\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  })), __jsx(\"div\", {\n    className: \"vehicle-picker-modal__actions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn btn-sm btn-secondary\",\n    onClick: onClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 21\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"BUTTON_CANCEL\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 25\n    }\n  })), __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn btn-sm btn-primary\",\n    onClick: onSelectClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 21\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"BUTTON_SELECT_VEHICLE\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 25\n    }\n  })))), __jsx(\"div\", {\n    className: classNames('vehicle-picker-modal__panel', {\n      'vehicle-picker-modal__panel--active': currentPanel === 'form' || vehicles.length === 0\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"vehicle-picker-modal__title card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"HEADER_ADD_VEHICLE\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  })), __jsx(VehicleForm, {\n    location: \"modal\",\n    onVehicleChange: setControlValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    className: \"vehicle-picker-modal__actions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }, vehicles.length !== 0 && __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn btn-sm btn-secondary\",\n    onClick: function onClick() {\n      return setCurrentPanel('list');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 25\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"BUTTON_BACK_TO_LIST\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 29\n    }\n  })), __jsx(AsyncAction, {\n    action: onAddVehicleClick,\n    render: function render(_ref3) {\n      var run = _ref3.run,\n          loading = _ref3.loading;\n      return __jsx(\"button\", {\n        type: \"button\",\n        className: classNames('btn', 'btn-sm', 'btn-primary', {\n          'btn-loading': loading\n        }),\n        disabled: controlValue === null,\n        onClick: run,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 29\n        }\n      }, __jsx(FormattedMessage, {\n        id: \"BUTTON_ADD_VEHICLE\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 33\n        }\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 21\n    }\n  }))));\n}\n\n_s(VehiclePickerModal, \"PjHseWi3rF/J4hONhj5S/eXzF00=\", false, function () {\n  return [useUserVehicles, useGarageRemoveItem, useGarageAddItem];\n});\n\n_c = VehiclePickerModal;\nexport default VehiclePickerModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"VehiclePickerModal\");","map":{"version":3,"sources":["C:/Users/Shbaita Studio/Documents/project/new1/themeforest-irsnufCS-redparts-auto-parts-react-ecommerce-template/Sources/src/components/shared/VehiclePickerModal.tsx"],"names":["React","useCallback","useEffect","useState","classNames","FormattedMessage","Modal","AsyncAction","RadioButton","VehicleForm","Cross12Svg","RecycleBin16Svg","useGarageAddItem","useGarageRemoveItem","useUserVehicles","VehiclePickerModal","props","value","isOpen","onClose","onSelect","vehicles","garageRemoveItem","garageAddItem","currentPanel","setCurrentPanel","innerValue","setInnerValue","controlValue","setControlValue","onSelectClick","toggle","onAddVehicleClick","id","length","map","vehicle","vehicleIdx","year","make","model","engine","run","loading"],"mappings":";;;;;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,SAA7B,EAAwCC,QAAxC,QAAwD,OAAxD,C,CACA;;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,gBAAT,QAAiC,YAAjC;AACA,SAASC,KAAT,QAAsB,YAAtB,C,CACA;;AACA,OAAOC,WAAP,MAAwB,iCAAxB;AACA,OAAOC,WAAP,MAAwB,iCAAxB;AACA,OAAOC,WAAP,MAAwB,iCAAxB;AACA,SAASC,UAAT,EAAqBC,eAArB,QAA4C,OAA5C;AAEA,SAASC,gBAAT,EAA2BC,mBAA3B,EAAgDC,eAAhD,QAAuE,4BAAvE;;AASA,SAASC,kBAAT,CAA4BC,KAA5B,EAA0C;AAAA;;AAAA;;AAAA,qBAMlCA,KANkC,CAElCC,KAFkC;AAAA,MAElCA,KAFkC,6BAE1B,IAF0B;AAAA,sBAMlCD,KANkC,CAGlCE,MAHkC;AAAA,MAGlCA,MAHkC,8BAGzB,KAHyB;AAAA,MAIlCC,OAJkC,GAMlCH,KANkC,CAIlCG,OAJkC;AAAA,MAKlCC,QALkC,GAMlCJ,KANkC,CAKlCI,QALkC;AAOtC,MAAMC,QAAQ,GAAGP,eAAe,EAAhC;AACA,MAAMQ,gBAAgB,GAAGT,mBAAmB,EAA5C;AACA,MAAMU,aAAa,GAAGX,gBAAgB,EAAtC;;AATsC,kBAUET,QAAQ,CAAC,MAAD,CAVV;AAAA,MAU/BqB,YAV+B;AAAA,MAUjBC,eAViB;;AAAA,mBAWFtB,QAAQ,CAAkB,IAAlB,CAXN;AAAA,MAW/BuB,UAX+B;AAAA,MAWnBC,aAXmB;;AAAA,mBAYExB,QAAQ,CAAkB,IAAlB,CAZV;AAAA,MAY/ByB,YAZ+B;AAAA,MAYjBC,eAZiB;;AActC,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AACxB,QAAIV,QAAJ,EAAc;AACVA,MAAAA,QAAQ,CAACM,UAAD,CAAR;AACH;;AACD,QAAIP,OAAJ,EAAa;AACTA,MAAAA,OAAO;AACV;AACJ,GAPD;;AASA,MAAMY,MAAM,GAAG9B,WAAW,CAAC,YAAM;AAC7B,QAAIiB,MAAM,IAAIC,OAAd,EAAuB;AACnBA,MAAAA,OAAO;AACV;AACJ,GAJyB,EAIvB,CAACD,MAAD,EAASC,OAAT,CAJuB,CAA1B;;AAMA,MAAMa,iBAAiB;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA,kBACjBJ,YADiB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,qBAKhBL,aAAa,CAACK,YAAY,CAACK,EAAd,CALG;;AAAA;AAOtBR,cAAAA,eAAe,CAAC,MAAD,CAAf;AACAE,cAAAA,aAAa,CAACC,YAAD,CAAb;;AARsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAjBI,iBAAiB;AAAA;AAAA;AAAA,KAAvB;;AAWA9B,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIgB,MAAJ,EAAY;AACRO,MAAAA,eAAe,CAAC,MAAD,CAAf;AACAE,MAAAA,aAAa,CAACV,KAAD,CAAb;AACH;AACJ,GALQ,EAKN,CAACC,MAAD,EAASD,KAAT,CALM,CAAT;AAOA,SACI,MAAC,KAAD;AAAO,IAAA,MAAM,EAAEC,MAAf;AAAuB,IAAA,MAAM,EAAEa,MAA/B;AAAuC,IAAA,QAAQ,MAA/C;AAAgD,IAAA,SAAS,EAAC,sBAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,SAAS,EAAC,6BAAhC;AAA8D,IAAA,OAAO,EAAEZ,OAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,EAKI;AACI,IAAA,SAAS,EAAEf,UAAU,CAAC,6BAAD,EAAgC;AACjD,6CAAuCoB,YAAY,KAAK,MAAjB,IAA2BH,QAAQ,CAACa,MAAT,KAAoB;AADrC,KAAhC,CADzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKI;AAAK,IAAA,SAAS,EAAC,wCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,uBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CALJ,EASI;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,6CAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CATJ,EAaI;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEI;AAAO,IAAA,SAAS,EAAC,qBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,WAAD;AACI,IAAA,SAAS,EAAC,2BADd;AAEI,IAAA,OAAO,EAAER,UAAU,KAAK,IAF5B;AAGI,IAAA,QAAQ,EAAE;AAAA,aAAMC,aAAa,CAAC,IAAD,CAAnB;AAAA,KAHd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAMI;AAAM,IAAA,SAAS,EAAC,0BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAM,IAAA,SAAS,EAAC,0BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,mBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,CANJ,CAFJ,EAcKN,QAAQ,CAACc,GAAT,CAAa,UAACC,OAAD,EAAUC,UAAV;AAAA,WACV;AACA;AAAO,QAAA,GAAG,EAAEA,UAAZ;AAAwB,QAAA,SAAS,EAAC,qBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,MAAC,WAAD;AACI,QAAA,SAAS,EAAC,2BADd;AAEI,QAAA,OAAO,EAAEX,UAAU,KAAK,IAAf,IAAuBA,UAAU,CAACO,EAAX,KAAkBG,OAAO,CAACH,EAF9D;AAGI,QAAA,QAAQ,EAAE;AAAA,iBAAMN,aAAa,CAACS,OAAD,CAAnB;AAAA,SAHd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAMI;AAAM,QAAA,SAAS,EAAC,0BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAM,QAAA,SAAS,EAAC,0BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACQA,OAAO,CAACE,IADhB,cACwBF,OAAO,CAACG,IADhC,cACwCH,OAAO,CAACI,KADhD,EADJ,EAII;AAAM,QAAA,SAAS,EAAC,6BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,MAAC,gBAAD;AACI,QAAA,EAAE,EAAC,qBADP;AAEI,QAAA,MAAM,EAAE;AAAEC,UAAAA,MAAM,EAAEL,OAAO,CAACK;AAAlB,SAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAJJ,CANJ,EAkBI,MAAC,WAAD;AACI,QAAA,MAAM,EAAE;AAAA,iBAAMnB,gBAAgB,CAACc,OAAO,CAACH,EAAT,CAAtB;AAAA,SADZ;AAEI,QAAA,MAAM,EAAE;AAAA,cAAGS,GAAH,SAAGA,GAAH;AAAA,cAAQC,OAAR,SAAQA,OAAR;AAAA,iBACJ;AACI,YAAA,IAAI,EAAC,QADT;AAEI,YAAA,SAAS,EAAEvC,UAAU,CAAC,4BAAD,EAA+B;AAChD,qDAAuCuC;AADS,aAA/B,CAFzB;AAKI,YAAA,OAAO,EAAED,GALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAOI,MAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAPJ,CADI;AAAA,SAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAlBJ;AAFU;AAAA,GAAb,CAdL,CADJ,CAbJ,EAmEI;AACI,IAAA,IAAI,EAAC,QADT;AAEI,IAAA,SAAS,EAAC,0EAFd;AAGI,IAAA,OAAO,EAAE;AAAA,aAAMjB,eAAe,CAAC,MAAD,CAArB;AAAA,KAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKI,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,yBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALJ,CAnEJ,EA2EI;AAAK,IAAA,SAAS,EAAC,+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AACI,IAAA,IAAI,EAAC,QADT;AAEI,IAAA,SAAS,EAAC,0BAFd;AAGI,IAAA,OAAO,EAAEN,OAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKI,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,eAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALJ,CADJ,EAQI;AACI,IAAA,IAAI,EAAC,QADT;AAEI,IAAA,SAAS,EAAC,wBAFd;AAGI,IAAA,OAAO,EAAEW,aAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKI,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,uBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALJ,CARJ,CA3EJ,CALJ,EAkGI;AACI,IAAA,SAAS,EAAE1B,UAAU,CAAC,6BAAD,EAAgC;AACjD,6CAAuCoB,YAAY,KAAK,MAAjB,IAA2BH,QAAQ,CAACa,MAAT,KAAoB;AADrC,KAAhC,CADzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKI;AAAK,IAAA,SAAS,EAAC,wCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,oBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CALJ,EAQI,MAAC,WAAD;AAAa,IAAA,QAAQ,EAAC,OAAtB;AAA8B,IAAA,eAAe,EAAEL,eAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARJ,EASI;AAAK,IAAA,SAAS,EAAC,+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKR,QAAQ,CAACa,MAAT,KAAoB,CAApB,IACG;AACI,IAAA,IAAI,EAAC,QADT;AAEI,IAAA,SAAS,EAAC,0BAFd;AAGI,IAAA,OAAO,EAAE;AAAA,aAAMT,eAAe,CAAC,MAAD,CAArB;AAAA,KAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKI,MAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,qBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALJ,CAFR,EAWI,MAAC,WAAD;AACI,IAAA,MAAM,EAAEO,iBADZ;AAEI,IAAA,MAAM,EAAE;AAAA,UAAGU,GAAH,SAAGA,GAAH;AAAA,UAAQC,OAAR,SAAQA,OAAR;AAAA,aACJ;AACI,QAAA,IAAI,EAAC,QADT;AAEI,QAAA,SAAS,EAAEvC,UAAU,CAAC,KAAD,EAAQ,QAAR,EAAkB,aAAlB,EAAiC;AAClD,yBAAeuC;AADmC,SAAjC,CAFzB;AAKI,QAAA,QAAQ,EAAEf,YAAY,KAAK,IAL/B;AAMI,QAAA,OAAO,EAAEc,GANb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAQI,MAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,oBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARJ,CADI;AAAA,KAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXJ,CATJ,CAlGJ,CADJ;AA0IH;;GAzLQ3B,kB;UAOYD,e,EACQD,mB,EACHD,gB;;;KATjBG,kB;AA2LT,eAAeA,kBAAf","sourcesContent":["// react\nimport React, { useCallback, useEffect, useState } from 'react';\n// third-party\nimport classNames from 'classnames';\nimport { FormattedMessage } from 'react-intl';\nimport { Modal } from 'reactstrap';\n// application\nimport AsyncAction from '~/components/shared/AsyncAction';\nimport RadioButton from '~/components/shared/RadioButton';\nimport VehicleForm from '~/components/shared/VehicleForm';\nimport { Cross12Svg, RecycleBin16Svg } from '~/svg';\nimport { IVehicle } from '~/interfaces/vehicle';\nimport { useGarageAddItem, useGarageRemoveItem, useUserVehicles } from '~/store/garage/garageHooks';\n\ninterface Props {\n    value?: IVehicle | null;\n    isOpen?: boolean;\n    onClose?: () => void;\n    onSelect?: (vehicle: IVehicle | null) => void;\n}\n\nfunction VehiclePickerModal(props: Props) {\n    const {\n        value = null,\n        isOpen = false,\n        onClose,\n        onSelect,\n    } = props;\n    const vehicles = useUserVehicles();\n    const garageRemoveItem = useGarageRemoveItem();\n    const garageAddItem = useGarageAddItem();\n    const [currentPanel, setCurrentPanel] = useState('list');\n    const [innerValue, setInnerValue] = useState<IVehicle | null>(null);\n    const [controlValue, setControlValue] = useState<IVehicle | null>(null);\n\n    const onSelectClick = () => {\n        if (onSelect) {\n            onSelect(innerValue);\n        }\n        if (onClose) {\n            onClose();\n        }\n    };\n\n    const toggle = useCallback(() => {\n        if (isOpen && onClose) {\n            onClose();\n        }\n    }, [isOpen, onClose]);\n\n    const onAddVehicleClick = async () => {\n        if (!controlValue) {\n            return;\n        }\n\n        await garageAddItem(controlValue.id);\n\n        setCurrentPanel('list');\n        setInnerValue(controlValue);\n    };\n\n    useEffect(() => {\n        if (isOpen) {\n            setCurrentPanel('list');\n            setInnerValue(value);\n        }\n    }, [isOpen, value]);\n\n    return (\n        <Modal isOpen={isOpen} toggle={toggle} centered className=\"vehicle-picker-modal\">\n            <button type=\"button\" className=\"vehicle-picker-modal__close\" onClick={onClose}>\n                <Cross12Svg />\n            </button>\n\n            <div\n                className={classNames('vehicle-picker-modal__panel', {\n                    'vehicle-picker-modal__panel--active': currentPanel === 'list' && vehicles.length !== 0,\n                })}\n            >\n                <div className=\"vehicle-picker-modal__title card-title\">\n                    <FormattedMessage id=\"HEADER_SELECT_VEHICLE\" />\n                </div>\n\n                <div className=\"vehicle-picker-modal__text\">\n                    <FormattedMessage id=\"TEXT_SELECT_VEHICLE_TO_FIND_EXACT_FIT_PARTS\" />\n                </div>\n\n                <div className=\"vehicles-list\">\n                    <div className=\"vehicles-list__body\">\n                        {/* eslint-disable-next-line jsx-a11y/label-has-associated-control */}\n                        <label className=\"vehicles-list__item\">\n                            <RadioButton\n                                className=\"vehicles-list__item-radio\"\n                                checked={innerValue === null}\n                                onChange={() => setInnerValue(null)}\n                            />\n                            <span className=\"vehicles-list__item-info\">\n                                <span className=\"vehicles-list__item-name\">\n                                    <FormattedMessage id=\"TEXT_ALL_VEHICLES\" />\n                                </span>\n                            </span>\n                        </label>\n                        {vehicles.map((vehicle, vehicleIdx) => (\n                            // eslint-disable-next-line jsx-a11y/label-has-associated-control\n                            <label key={vehicleIdx} className=\"vehicles-list__item\">\n                                <RadioButton\n                                    className=\"vehicles-list__item-radio\"\n                                    checked={innerValue !== null && innerValue.id === vehicle.id}\n                                    onChange={() => setInnerValue(vehicle)}\n                                />\n                                <span className=\"vehicles-list__item-info\">\n                                    <span className=\"vehicles-list__item-name\">\n                                        {`${vehicle.year} ${vehicle.make} ${vehicle.model}`}\n                                    </span>\n                                    <span className=\"vehicles-list__item-details\">\n                                        <FormattedMessage\n                                            id=\"TEXT_VEHICLE_ENGINE\"\n                                            values={{ engine: vehicle.engine }}\n                                        />\n                                    </span>\n                                </span>\n\n                                <AsyncAction\n                                    action={() => garageRemoveItem(vehicle.id)}\n                                    render={({ run, loading }) => (\n                                        <button\n                                            type=\"button\"\n                                            className={classNames('vehicles-list__item-remove', {\n                                                'vehicles-list__item-remove--loading': loading,\n                                            })}\n                                            onClick={run}\n                                        >\n                                            <RecycleBin16Svg />\n                                        </button>\n                                    )}\n                                />\n                            </label>\n                        ))}\n                    </div>\n                </div>\n\n                <button\n                    type=\"button\"\n                    className=\"btn btn-sm btn-secondary btn-block mt-2 vehicle-picker-modal__add-button\"\n                    onClick={() => setCurrentPanel('form')}\n                >\n                    <FormattedMessage id=\"BUTTON_ADD_VEHICLE_LONG\" />\n                </button>\n\n                <div className=\"vehicle-picker-modal__actions\">\n                    <button\n                        type=\"button\"\n                        className=\"btn btn-sm btn-secondary\"\n                        onClick={onClose}\n                    >\n                        <FormattedMessage id=\"BUTTON_CANCEL\" />\n                    </button>\n                    <button\n                        type=\"button\"\n                        className=\"btn btn-sm btn-primary\"\n                        onClick={onSelectClick}\n                    >\n                        <FormattedMessage id=\"BUTTON_SELECT_VEHICLE\" />\n                    </button>\n                </div>\n            </div>\n\n            <div\n                className={classNames('vehicle-picker-modal__panel', {\n                    'vehicle-picker-modal__panel--active': currentPanel === 'form' || vehicles.length === 0,\n                })}\n            >\n                <div className=\"vehicle-picker-modal__title card-title\">\n                    <FormattedMessage id=\"HEADER_ADD_VEHICLE\" />\n                </div>\n                <VehicleForm location=\"modal\" onVehicleChange={setControlValue} />\n                <div className=\"vehicle-picker-modal__actions\">\n                    {vehicles.length !== 0 && (\n                        <button\n                            type=\"button\"\n                            className=\"btn btn-sm btn-secondary\"\n                            onClick={() => setCurrentPanel('list')}\n                        >\n                            <FormattedMessage id=\"BUTTON_BACK_TO_LIST\" />\n                        </button>\n                    )}\n\n                    <AsyncAction\n                        action={onAddVehicleClick}\n                        render={({ run, loading }) => (\n                            <button\n                                type=\"button\"\n                                className={classNames('btn', 'btn-sm', 'btn-primary', {\n                                    'btn-loading': loading,\n                                })}\n                                disabled={controlValue === null}\n                                onClick={run}\n                            >\n                                <FormattedMessage id=\"BUTTON_ADD_VEHICLE\" />\n                            </button>\n                        )}\n                    />\n                </div>\n            </div>\n        </Modal>\n    );\n}\n\nexport default VehiclePickerModal;\n"]},"metadata":{},"sourceType":"module"}