{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n// application\nimport { baseUrl } from '~/services/utils';\n// data\nimport dataShopLanguages, { dataShopDefaultLocale } from '~/data/shopLanguages';\nexport function getDefaultLocale() {\n  return dataShopDefaultLocale;\n}\nexport function getAllLanguages() {\n  return dataShopLanguages;\n}\nexport function getDefaultLanguage() {\n  var language = getAllLanguages().find(function (language) {\n    return language.locale === getDefaultLocale();\n  });\n\n  if (!language) {\n    throw new Error('Default language not found.');\n  }\n\n  return language;\n}\nexport function getLanguageByPath(path) {\n  return getAllLanguages().find(function (language) {\n    var rg = new RegExp(\"^\\\\/\".concat(language.locale, \"(\\\\/|$)\"));\n    return rg.test(path);\n  }) || null;\n}\nexport function getLanguageByLocale(locale) {\n  return getAllLanguages().find(function (language) {\n    return language.locale === locale;\n  }) || null;\n}\n\nfunction loadTranslation(_x) {\n  return _loadTranslation.apply(this, arguments);\n}\n\nfunction _loadTranslation() {\n  _loadTranslation = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(locale) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!true) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", fetch(baseUrl(\"/i18n/\".concat(locale, \".json\"))).then(function (response) {\n              return response.json();\n            }));\n\n          case 2:\n            _context.next = 4;\n            return import(\"../../../public/i18n/\".concat(locale, \".json\"));\n\n          case 4:\n            return _context.abrupt(\"return\", _context.sent[\"default\"]);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _loadTranslation.apply(this, arguments);\n}\n\nexport function loadMessages(_x2) {\n  return _loadMessages.apply(this, arguments);\n}\n\nfunction _loadMessages() {\n  _loadMessages = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(locale) {\n    var baseMessages, mainMessages;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            baseMessages = locale === getDefaultLocale() ? Promise.resolve({}) : loadTranslation(getDefaultLocale());\n            mainMessages = loadTranslation(locale);\n            _context2.t0 = _objectSpread;\n            _context2.t1 = _objectSpread;\n            _context2.t2 = {};\n            _context2.next = 7;\n            return baseMessages;\n\n          case 7:\n            _context2.t3 = _context2.sent;\n            _context2.t4 = (0, _context2.t1)(_context2.t2, _context2.t3);\n            _context2.next = 11;\n            return mainMessages;\n\n          case 11:\n            _context2.t5 = _context2.sent;\n            return _context2.abrupt(\"return\", (0, _context2.t0)(_context2.t4, _context2.t5));\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadMessages.apply(this, arguments);\n}\n\nexport function removePrefix(path) {\n  var languages = getAllLanguages();\n\n  for (var i = 0; i < languages.length; i += 1) {\n    var language = languages[i];\n    var rg = new RegExp(\"^\\\\/\".concat(language.locale, \"(\\\\/|$)\"));\n\n    if (rg.test(path)) {\n      return path.substr(language.locale.length + 1);\n    }\n  }\n\n  return path;\n}","map":{"version":3,"sources":["C:/Users/Shbaita Studio/Documents/project/new1/themeforest-irsnufCS-redparts-auto-parts-react-ecommerce-template/Sources/src/services/i18n/utils.ts"],"names":["baseUrl","dataShopLanguages","dataShopDefaultLocale","getDefaultLocale","getAllLanguages","getDefaultLanguage","language","find","locale","Error","getLanguageByPath","path","rg","RegExp","test","getLanguageByLocale","loadTranslation","fetch","then","response","json","loadMessages","baseMessages","Promise","resolve","mainMessages","removePrefix","languages","i","length","substr"],"mappings":";;;;;;;;AAAA;AACA,SAASA,OAAT,QAAwB,kBAAxB;AAEA;AACA,OAAOC,iBAAP,IAA4BC,qBAA5B,QAAyD,sBAAzD;AAEA,OAAO,SAASC,gBAAT,GAAoC;AACvC,SAAOD,qBAAP;AACH;AAED,OAAO,SAASE,eAAT,GAAwC;AAC3C,SAAOH,iBAAP;AACH;AAED,OAAO,SAASI,kBAAT,GAAyC;AAC5C,MAAMC,QAAQ,GAAGF,eAAe,GAAGG,IAAlB,CAAuB,UAACD,QAAD;AAAA,WAAcA,QAAQ,CAACE,MAAT,KAAoBL,gBAAgB,EAAlD;AAAA,GAAvB,CAAjB;;AAEA,MAAI,CAACG,QAAL,EAAe;AACX,UAAM,IAAIG,KAAJ,CAAU,6BAAV,CAAN;AACH;;AAED,SAAOH,QAAP;AACH;AAED,OAAO,SAASI,iBAAT,CAA2BC,IAA3B,EAA2D;AAC9D,SAAOP,eAAe,GAAGG,IAAlB,CAAuB,UAACD,QAAD,EAAc;AACxC,QAAMM,EAAE,GAAG,IAAIC,MAAJ,eAAkBP,QAAQ,CAACE,MAA3B,aAAX;AAEA,WAAOI,EAAE,CAACE,IAAH,CAAQH,IAAR,CAAP;AACH,GAJM,KAID,IAJN;AAKH;AAED,OAAO,SAASI,mBAAT,CAA6BP,MAA7B,EAA+D;AAClE,SAAOJ,eAAe,GAAGG,IAAlB,CAAuB,UAACD,QAAD;AAAA,WAAcA,QAAQ,CAACE,MAAT,KAAoBA,MAAlC;AAAA,GAAvB,KAAoE,IAA3E;AACH;;SAEcQ,e;;;;;8EAAf,iBAA+BR,MAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,6CAEeS,KAAK,CAACjB,OAAO,iBAAUQ,MAAV,WAAR,CAAL,CAAuCU,IAAvC,CAA4C,UAACC,QAAD;AAAA,qBAAcA,QAAQ,CAACC,IAAT,EAAd;AAAA,aAA5C,CAFf;;AAAA;AAAA;AAAA,mBAKkB,sCAA+BZ,MAA/B,WALlB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAQA,gBAAsBa,YAAtB;AAAA;AAAA;;;2EAAO,kBAA4Bb,MAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AACGc,YAAAA,YADH,GACsDd,MAAM,KAAKL,gBAAgB,EAA3B,GACnDoB,OAAO,CAACC,OAAR,CAAgB,EAAhB,CADmD,GAEnDR,eAAe,CAACb,gBAAgB,EAAjB,CAHlB;AAIGsB,YAAAA,YAJH,GAIkBT,eAAe,CAACR,MAAD,CAJjC;AAAA;AAAA;AAAA;AAAA;AAAA,mBAMec,YANf;;AAAA;AAAA;AAAA;AAAA;AAAA,mBAMsCG,YANtC;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AASP,OAAO,SAASC,YAAT,CAAsBf,IAAtB,EAA4C;AAC/C,MAAMgB,SAAS,GAAGvB,eAAe,EAAjC;;AAEA,OAAK,IAAIwB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,SAAS,CAACE,MAA9B,EAAsCD,CAAC,IAAI,CAA3C,EAA8C;AAC1C,QAAMtB,QAAQ,GAAGqB,SAAS,CAACC,CAAD,CAA1B;AACA,QAAMhB,EAAE,GAAG,IAAIC,MAAJ,eAAkBP,QAAQ,CAACE,MAA3B,aAAX;;AAEA,QAAII,EAAE,CAACE,IAAH,CAAQH,IAAR,CAAJ,EAAmB;AACf,aAAOA,IAAI,CAACmB,MAAL,CAAYxB,QAAQ,CAACE,MAAT,CAAgBqB,MAAhB,GAAyB,CAArC,CAAP;AACH;AACJ;;AAED,SAAOlB,IAAP;AACH","sourcesContent":["// application\nimport { baseUrl } from '~/services/utils';\nimport { ILanguage } from '~/interfaces/language';\n// data\nimport dataShopLanguages, { dataShopDefaultLocale } from '~/data/shopLanguages';\n\nexport function getDefaultLocale(): string {\n    return dataShopDefaultLocale;\n}\n\nexport function getAllLanguages(): ILanguage[] {\n    return dataShopLanguages;\n}\n\nexport function getDefaultLanguage(): ILanguage {\n    const language = getAllLanguages().find((language) => language.locale === getDefaultLocale());\n\n    if (!language) {\n        throw new Error('Default language not found.');\n    }\n\n    return language;\n}\n\nexport function getLanguageByPath(path: string): ILanguage | null {\n    return getAllLanguages().find((language) => {\n        const rg = new RegExp(`^\\\\/${language.locale}(\\\\/|$)`);\n\n        return rg.test(path);\n    }) || null;\n}\n\nexport function getLanguageByLocale(locale: string): ILanguage | null {\n    return getAllLanguages().find((language) => language.locale === locale) || null;\n}\n\nasync function loadTranslation(locale: string): Promise<Record<string, string>> {\n    if (process.browser) {\n        return fetch(baseUrl(`/i18n/${locale}.json`)).then((response) => response.json());\n    }\n\n    return (await import(`../../../public/i18n/${locale}.json`)).default;\n}\n\nexport async function loadMessages(locale: string): Promise<Record<string, string>> {\n    const baseMessages: ReturnType<typeof loadTranslation> = locale === getDefaultLocale()\n        ? Promise.resolve({})\n        : loadTranslation(getDefaultLocale());\n    const mainMessages = loadTranslation(locale);\n\n    return { ...await baseMessages, ...await mainMessages };\n}\n\nexport function removePrefix(path: string): string {\n    const languages = getAllLanguages();\n\n    for (let i = 0; i < languages.length; i += 1) {\n        const language = languages[i];\n        const rg = new RegExp(`^\\\\/${language.locale}(\\\\/|$)`);\n\n        if (rg.test(path)) {\n            return path.substr(language.locale.length + 1);\n        }\n    }\n\n    return path;\n}\n"]},"metadata":{},"sourceType":"module"}