{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n// application\nimport { CategoryFilterBuilder } from '~/fake-server/filters/category-filter-builder';\nimport { CheckFilterBuilder } from '~/fake-server/filters/check-filter-builder';\nimport { clone, delayResponse, error } from '~/fake-server/utils';\nimport { ColorFilterBuilder } from '~/fake-server/filters/color-filter-builder';\nimport { getNextReviewId, reviews } from '~/fake-server/database/reviews';\nimport { prepareCategory } from '~/fake-server/endpoints/categories';\nimport { products as dbProducts } from '~/fake-server/database/products';\nimport { RadioFilterBuilder } from '~/fake-server/filters/radio-filter-builder';\nimport { RangeFilterBuilder } from '~/fake-server/filters/range-filter-builder';\nimport { RatingFilterBuilder } from '~/fake-server/filters/rating-filter-builder';\nimport { shopCategoriesList } from '~/fake-server/database/categories';\nimport { VehicleFilterBuilder } from '~/fake-server/filters/vehicle-filter-builder';\n\nfunction getProducts(shift) {\n  var categorySlug = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var shiftValue = shift;\n\n  switch (categorySlug) {\n    case 'tires-wheels':\n    case 'power-tools':\n      shiftValue += 5;\n      break;\n\n    case 'interior-parts':\n    case 'hand-tools':\n      shiftValue += 10;\n      break;\n\n    case 'engine-drivetrain':\n    case 'plumbing':\n      shiftValue += 15;\n      break;\n\n    default:\n  }\n\n  return [].concat(_toConsumableArray(dbProducts.slice(shiftValue)), _toConsumableArray(dbProducts.slice(0, shiftValue)));\n}\n\nexport function getProductsList() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var filterValues = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var filters = [new CategoryFilterBuilder('category', 'Categories'), new VehicleFilterBuilder('vehicle', 'Vehicle'), new RangeFilterBuilder('price', 'Price'), new CheckFilterBuilder('brand', 'Brand'), new RadioFilterBuilder('discount', 'With Discount'), new RatingFilterBuilder('rating', 'Rating'), new ColorFilterBuilder('color', 'Color')];\n  var products = dbProducts.slice(0);\n  filters.forEach(function (filter) {\n    return filter.makeItems(products, filterValues[filter.slug]);\n  }); // Calculate items count for filter values.\n\n  filters.forEach(function (filter) {\n    return filter.calc(filters);\n  }); // Apply filters to products list.\n\n  products = products.filter(function (product) {\n    return filters.reduce(function (mr, filter) {\n      return mr && filter.test(product);\n    }, true);\n  });\n  var page = (options === null || options === void 0 ? void 0 : options.page) || 1;\n  var limit = (options === null || options === void 0 ? void 0 : options.limit) || 16;\n  var sort = (options === null || options === void 0 ? void 0 : options.sort) || 'default';\n  var total = products.length;\n  var pages = Math.ceil(products.length / limit);\n  var from = (page - 1) * limit + 1;\n  var to = Math.min(page * limit, total); // Sort items array.\n\n  products = products.sort(function (a, b) {\n    if (['name_asc', 'name_desc'].includes(sort)) {\n      if (a.name === b.name) {\n        return 0;\n      }\n\n      return (a.name > b.name ? 1 : -1) * (sort === 'name_asc' ? 1 : -1);\n    }\n\n    return 0;\n  });\n  var items = products.slice(from - 1, to);\n  return delayResponse(Promise.resolve({\n    items: items,\n    page: page,\n    limit: limit,\n    sort: sort,\n    total: total,\n    pages: pages,\n    from: from,\n    to: to,\n    filters: filters.map(function (x) {\n      return x.build();\n    })\n  }), 350);\n}\nexport function getProductBySlug(slug) {\n  var product = dbProducts.find(function (x) {\n    return x.slug === slug;\n  });\n\n  if (!product) {\n    return error('Page Not Found');\n  }\n\n  return Promise.resolve(clone(product));\n}\nexport function getProductReviews(productId, options) {\n  var items = reviews.slice(0);\n  items.sort(function (a, b) {\n    if (a.date > b.date) {\n      return -1;\n    }\n\n    if (a.date < b.date) {\n      return 1;\n    }\n\n    return 0;\n  });\n  var page = (options === null || options === void 0 ? void 0 : options.page) || 1;\n  var limit = (options === null || options === void 0 ? void 0 : options.limit) || 8;\n  var sort = (options === null || options === void 0 ? void 0 : options.sort) || 'default';\n  var total = items.length;\n  var pages = Math.ceil(items.length / limit);\n  var from = (page - 1) * limit + 1;\n  var to = page * limit;\n  items = items.slice(from - 1, to);\n  return Promise.resolve({\n    items: items,\n    page: page,\n    limit: limit,\n    sort: sort,\n    total: total,\n    pages: pages,\n    from: from,\n    to: to\n  });\n}\nexport function addProductReview(productId, data) {\n  var review = {\n    id: getNextReviewId(),\n    date: new Date().toISOString().substr(0, 10),\n    author: data.author,\n    avatar: '/images/avatars/avatar-2.jpg',\n    rating: data.rating,\n    content: data.content\n  };\n  reviews.push(review);\n  return delayResponse(Promise.resolve(review));\n} // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\nexport function getProductAnalogs(productId) {\n  var slugs = ['sunset-brake-kit', 'specter-brake-kit', 'brake-kit'];\n  var analogs = dbProducts.filter(function (x) {\n    return slugs.includes(x.slug);\n  });\n  return Promise.resolve(clone(analogs));\n}\nexport function getRelatedProducts(productId, limit) {\n  return Promise.resolve(clone(dbProducts.slice(0, limit)));\n}\nexport function getFeaturedProducts(categorySlug, limit) {\n  return delayResponse(Promise.resolve(clone(getProducts(0, categorySlug).slice(0, limit))), 1000);\n}\nexport function getPopularProducts(categorySlug, limit) {\n  return delayResponse(Promise.resolve(clone(getProducts(6, categorySlug).slice(0, limit))), 1000);\n}\nexport function getTopRatedProducts(categorySlug, limit) {\n  return delayResponse(Promise.resolve(clone(getProducts(12, categorySlug).slice(0, limit))), 1000);\n}\nexport function getSpecialOffers(limit) {\n  return delayResponse(Promise.resolve(clone(getProducts(8).slice(0, limit))), 1000);\n}\nexport function getLatestProducts(limit) {\n  return Promise.resolve(clone(dbProducts.slice(0, limit)));\n}\nexport function getSearchSuggestions(query, options) {\n  var queryVal = query.toLowerCase();\n\n  var optionsVal = _objectSpread({\n    limitProducts: 4,\n    limitCategories: 4\n  }, options);\n\n  var resultProducts = dbProducts.filter(function (x) {\n    return x.name.toLowerCase().includes(queryVal);\n  });\n  var resultCategories = shopCategoriesList.filter(function (x) {\n    return x.name.toLowerCase().includes(queryVal);\n  });\n  return Promise.resolve({\n    products: resultProducts.slice(0, optionsVal.limitProducts),\n    categories: resultCategories.slice(0, optionsVal.limitCategories).map(function (x) {\n      return prepareCategory(x);\n    })\n  });\n}","map":{"version":3,"sources":["C:/Users/Shbaita Studio/Documents/project/new1/themeforest-irsnufCS-redparts-auto-parts-react-ecommerce-template/Sources/src/fake-server/endpoints/products.ts"],"names":["CategoryFilterBuilder","CheckFilterBuilder","clone","delayResponse","error","ColorFilterBuilder","getNextReviewId","reviews","prepareCategory","products","dbProducts","RadioFilterBuilder","RangeFilterBuilder","RatingFilterBuilder","shopCategoriesList","VehicleFilterBuilder","getProducts","shift","categorySlug","shiftValue","slice","getProductsList","options","filterValues","filters","forEach","filter","makeItems","slug","calc","product","reduce","mr","test","page","limit","sort","total","length","pages","Math","ceil","from","to","min","a","b","includes","name","items","Promise","resolve","map","x","build","getProductBySlug","find","getProductReviews","productId","date","addProductReview","data","review","id","Date","toISOString","substr","author","avatar","rating","content","push","getProductAnalogs","slugs","analogs","getRelatedProducts","getFeaturedProducts","getPopularProducts","getTopRatedProducts","getSpecialOffers","getLatestProducts","getSearchSuggestions","query","queryVal","toLowerCase","optionsVal","limitProducts","limitCategories","resultProducts","resultCategories","categories"],"mappings":";;;;;;;AAAA;AAEA,SAASA,qBAAT,QAAsC,+CAAtC;AACA,SAASC,kBAAT,QAAmC,4CAAnC;AACA,SAASC,KAAT,EAAgBC,aAAhB,EAA+BC,KAA/B,QAA4C,qBAA5C;AACA,SAASC,kBAAT,QAAmC,4CAAnC;AACA,SAASC,eAAT,EAA0BC,OAA1B,QAAyC,gCAAzC;AAIA,SAASC,eAAT,QAAgC,oCAAhC;AACA,SAASC,QAAQ,IAAIC,UAArB,QAAuC,iCAAvC;AACA,SAASC,kBAAT,QAAmC,4CAAnC;AACA,SAASC,kBAAT,QAAmC,4CAAnC;AACA,SAASC,mBAAT,QAAoC,6CAApC;AACA,SAASC,kBAAT,QAAmC,mCAAnC;AACA,SAASC,oBAAT,QAAqC,8CAArC;;AAOA,SAASC,WAAT,CAAqBC,KAArB,EAAoF;AAAA,MAAhDC,YAAgD,uEAAlB,IAAkB;AAChF,MAAIC,UAAU,GAAGF,KAAjB;;AAEA,UAAQC,YAAR;AACA,SAAK,cAAL;AACA,SAAK,aAAL;AAAoBC,MAAAA,UAAU,IAAI,CAAd;AAAiB;;AACrC,SAAK,gBAAL;AACA,SAAK,YAAL;AAAmBA,MAAAA,UAAU,IAAI,EAAd;AAAkB;;AACrC,SAAK,mBAAL;AACA,SAAK,UAAL;AAAiBA,MAAAA,UAAU,IAAI,EAAd;AAAkB;;AACnC;AAPA;;AAUA,sCAAWT,UAAU,CAACU,KAAX,CAAiBD,UAAjB,CAAX,sBAA4CT,UAAU,CAACU,KAAX,CAAiB,CAAjB,EAAoBD,UAApB,CAA5C;AACH;;AAED,OAAO,SAASE,eAAT,GAGmB;AAAA,MAFtBC,OAEsB,uEAFE,EAEF;AAAA,MADtBC,YACsB,uEADQ,EACR;AACtB,MAAMC,OAAgC,GAAG,CACrC,IAAIxB,qBAAJ,CAA0B,UAA1B,EAAsC,YAAtC,CADqC,EAErC,IAAIe,oBAAJ,CAAyB,SAAzB,EAAoC,SAApC,CAFqC,EAGrC,IAAIH,kBAAJ,CAAuB,OAAvB,EAAgC,OAAhC,CAHqC,EAIrC,IAAIX,kBAAJ,CAAuB,OAAvB,EAAgC,OAAhC,CAJqC,EAKrC,IAAIU,kBAAJ,CAAuB,UAAvB,EAAmC,eAAnC,CALqC,EAMrC,IAAIE,mBAAJ,CAAwB,QAAxB,EAAkC,QAAlC,CANqC,EAOrC,IAAIR,kBAAJ,CAAuB,OAAvB,EAAgC,OAAhC,CAPqC,CAAzC;AAUA,MAAII,QAAQ,GAAGC,UAAU,CAACU,KAAX,CAAiB,CAAjB,CAAf;AAEAI,EAAAA,OAAO,CAACC,OAAR,CAAgB,UAACC,MAAD;AAAA,WAAYA,MAAM,CAACC,SAAP,CAAiBlB,QAAjB,EAA2Bc,YAAY,CAACG,MAAM,CAACE,IAAR,CAAvC,CAAZ;AAAA,GAAhB,EAbsB,CAetB;;AACAJ,EAAAA,OAAO,CAACC,OAAR,CAAgB,UAACC,MAAD;AAAA,WAAYA,MAAM,CAACG,IAAP,CAAYL,OAAZ,CAAZ;AAAA,GAAhB,EAhBsB,CAkBtB;;AACAf,EAAAA,QAAQ,GAAGA,QAAQ,CAACiB,MAAT,CAAgB,UAACI,OAAD;AAAA,WAAaN,OAAO,CAACO,MAAR,CAAwB,UAACC,EAAD,EAAKN,MAAL;AAAA,aAAgBM,EAAE,IAAIN,MAAM,CAACO,IAAP,CAAYH,OAAZ,CAAtB;AAAA,KAAxB,EAAoE,IAApE,CAAb;AAAA,GAAhB,CAAX;AAEA,MAAMI,IAAI,GAAG,CAAAZ,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEY,IAAT,KAAiB,CAA9B;AACA,MAAMC,KAAK,GAAG,CAAAb,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEa,KAAT,KAAkB,EAAhC;AACA,MAAMC,IAAI,GAAG,CAAAd,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEc,IAAT,KAAiB,SAA9B;AACA,MAAMC,KAAK,GAAG5B,QAAQ,CAAC6B,MAAvB;AACA,MAAMC,KAAK,GAAGC,IAAI,CAACC,IAAL,CAAUhC,QAAQ,CAAC6B,MAAT,GAAkBH,KAA5B,CAAd;AACA,MAAMO,IAAI,GAAG,CAACR,IAAI,GAAG,CAAR,IAAaC,KAAb,GAAqB,CAAlC;AACA,MAAMQ,EAAE,GAAGH,IAAI,CAACI,GAAL,CAASV,IAAI,GAAGC,KAAhB,EAAuBE,KAAvB,CAAX,CA3BsB,CA6BtB;;AACA5B,EAAAA,QAAQ,GAAGA,QAAQ,CAAC2B,IAAT,CAAc,UAACS,CAAD,EAAIC,CAAJ,EAAU;AAC/B,QAAI,CAAC,UAAD,EAAa,WAAb,EAA0BC,QAA1B,CAAmCX,IAAnC,CAAJ,EAA8C;AAC1C,UAAIS,CAAC,CAACG,IAAF,KAAWF,CAAC,CAACE,IAAjB,EAAuB;AACnB,eAAO,CAAP;AACH;;AAED,aAAO,CAACH,CAAC,CAACG,IAAF,GAASF,CAAC,CAACE,IAAX,GAAkB,CAAlB,GAAsB,CAAC,CAAxB,KAA8BZ,IAAI,KAAK,UAAT,GAAsB,CAAtB,GAA0B,CAAC,CAAzD,CAAP;AACH;;AAED,WAAO,CAAP;AACH,GAVU,CAAX;AAYA,MAAMa,KAAK,GAAGxC,QAAQ,CAACW,KAAT,CAAesB,IAAI,GAAG,CAAtB,EAAyBC,EAAzB,CAAd;AAEA,SAAOxC,aAAa,CAAC+C,OAAO,CAACC,OAAR,CAAgB;AACjCF,IAAAA,KAAK,EAALA,KADiC;AAEjCf,IAAAA,IAAI,EAAJA,IAFiC;AAGjCC,IAAAA,KAAK,EAALA,KAHiC;AAIjCC,IAAAA,IAAI,EAAJA,IAJiC;AAKjCC,IAAAA,KAAK,EAALA,KALiC;AAMjCE,IAAAA,KAAK,EAALA,KANiC;AAOjCG,IAAAA,IAAI,EAAJA,IAPiC;AAQjCC,IAAAA,EAAE,EAAFA,EARiC;AASjCnB,IAAAA,OAAO,EAAEA,OAAO,CAAC4B,GAAR,CAAY,UAACC,CAAD;AAAA,aAAOA,CAAC,CAACC,KAAF,EAAP;AAAA,KAAZ;AATwB,GAAhB,CAAD,EAUhB,GAVgB,CAApB;AAWH;AAED,OAAO,SAASC,gBAAT,CAA0B3B,IAA1B,EAA2D;AAC9D,MAAME,OAAO,GAAGpB,UAAU,CAAC8C,IAAX,CAAgB,UAACH,CAAD;AAAA,WAAOA,CAAC,CAACzB,IAAF,KAAWA,IAAlB;AAAA,GAAhB,CAAhB;;AAEA,MAAI,CAACE,OAAL,EAAc;AACV,WAAO1B,KAAK,CAAC,gBAAD,CAAZ;AACH;;AAED,SAAO8C,OAAO,CAACC,OAAR,CAAgBjD,KAAK,CAAC4B,OAAD,CAArB,CAAP;AACH;AAED,OAAO,SAAS2B,iBAAT,CAA2BC,SAA3B,EAA8CpC,OAA9C,EAA6F;AAChG,MAAI2B,KAAK,GAAG1C,OAAO,CAACa,KAAR,CAAc,CAAd,CAAZ;AAEA6B,EAAAA,KAAK,CAACb,IAAN,CAAW,UAACS,CAAD,EAAIC,CAAJ,EAAU;AACjB,QAAID,CAAC,CAACc,IAAF,GAASb,CAAC,CAACa,IAAf,EAAqB;AACjB,aAAO,CAAC,CAAR;AACH;;AACD,QAAId,CAAC,CAACc,IAAF,GAASb,CAAC,CAACa,IAAf,EAAqB;AACjB,aAAO,CAAP;AACH;;AAED,WAAO,CAAP;AACH,GATD;AAWA,MAAMzB,IAAI,GAAG,CAAAZ,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEY,IAAT,KAAiB,CAA9B;AACA,MAAMC,KAAK,GAAG,CAAAb,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEa,KAAT,KAAkB,CAAhC;AACA,MAAMC,IAAI,GAAG,CAAAd,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEc,IAAT,KAAiB,SAA9B;AACA,MAAMC,KAAK,GAAGY,KAAK,CAACX,MAApB;AACA,MAAMC,KAAK,GAAGC,IAAI,CAACC,IAAL,CAAUQ,KAAK,CAACX,MAAN,GAAeH,KAAzB,CAAd;AACA,MAAMO,IAAI,GAAG,CAACR,IAAI,GAAG,CAAR,IAAaC,KAAb,GAAqB,CAAlC;AACA,MAAMQ,EAAE,GAAGT,IAAI,GAAGC,KAAlB;AAEAc,EAAAA,KAAK,GAAGA,KAAK,CAAC7B,KAAN,CAAYsB,IAAI,GAAG,CAAnB,EAAsBC,EAAtB,CAAR;AAEA,SAAOO,OAAO,CAACC,OAAR,CAAgB;AACnBF,IAAAA,KAAK,EAALA,KADmB;AAEnBf,IAAAA,IAAI,EAAJA,IAFmB;AAGnBC,IAAAA,KAAK,EAALA,KAHmB;AAInBC,IAAAA,IAAI,EAAJA,IAJmB;AAKnBC,IAAAA,KAAK,EAALA,KALmB;AAMnBE,IAAAA,KAAK,EAALA,KANmB;AAOnBG,IAAAA,IAAI,EAAJA,IAPmB;AAQnBC,IAAAA,EAAE,EAAFA;AARmB,GAAhB,CAAP;AAUH;AAED,OAAO,SAASiB,gBAAT,CAA0BF,SAA1B,EAA6CG,IAA7C,EAA4F;AAC/F,MAAMC,MAAe,GAAG;AACpBC,IAAAA,EAAE,EAAEzD,eAAe,EADC;AAEpBqD,IAAAA,IAAI,EAAG,IAAIK,IAAJ,EAAD,CAAaC,WAAb,GAA2BC,MAA3B,CAAkC,CAAlC,EAAqC,EAArC,CAFc;AAGpBC,IAAAA,MAAM,EAAEN,IAAI,CAACM,MAHO;AAIpBC,IAAAA,MAAM,EAAE,8BAJY;AAKpBC,IAAAA,MAAM,EAAER,IAAI,CAACQ,MALO;AAMpBC,IAAAA,OAAO,EAAET,IAAI,CAACS;AANM,GAAxB;AASA/D,EAAAA,OAAO,CAACgE,IAAR,CAAaT,MAAb;AAEA,SAAO3D,aAAa,CAAC+C,OAAO,CAACC,OAAR,CAAgBW,MAAhB,CAAD,CAApB;AACH,C,CAED;;AACA,OAAO,SAASU,iBAAT,CAA2Bd,SAA3B,EAAmE;AACtE,MAAMe,KAAe,GAAG,CACpB,kBADoB,EAEpB,mBAFoB,EAGpB,WAHoB,CAAxB;AAKA,MAAMC,OAAmB,GAAGhE,UAAU,CAACgB,MAAX,CAAkB,UAAC2B,CAAD;AAAA,WAAOoB,KAAK,CAAC1B,QAAN,CAAeM,CAAC,CAACzB,IAAjB,CAAP;AAAA,GAAlB,CAA5B;AAEA,SAAOsB,OAAO,CAACC,OAAR,CAAgBjD,KAAK,CAACwE,OAAD,CAArB,CAAP;AACH;AAED,OAAO,SAASC,kBAAT,CAA4BjB,SAA5B,EAA+CvB,KAA/C,EAAmF;AACtF,SAAOe,OAAO,CAACC,OAAR,CAAgBjD,KAAK,CAACQ,UAAU,CAACU,KAAX,CAAiB,CAAjB,EAAoBe,KAApB,CAAD,CAArB,CAAP;AACH;AAED,OAAO,SAASyC,mBAAT,CAA6B1D,YAA7B,EAA0DiB,KAA1D,EAA8F;AACjG,SAAOhC,aAAa,CAAC+C,OAAO,CAACC,OAAR,CAAgBjD,KAAK,CAACc,WAAW,CAAC,CAAD,EAAIE,YAAJ,CAAX,CAA6BE,KAA7B,CAAmC,CAAnC,EAAsCe,KAAtC,CAAD,CAArB,CAAD,EAAuE,IAAvE,CAApB;AACH;AAED,OAAO,SAAS0C,kBAAT,CAA4B3D,YAA5B,EAAyDiB,KAAzD,EAA6F;AAChG,SAAOhC,aAAa,CAAC+C,OAAO,CAACC,OAAR,CAAgBjD,KAAK,CAACc,WAAW,CAAC,CAAD,EAAIE,YAAJ,CAAX,CAA6BE,KAA7B,CAAmC,CAAnC,EAAsCe,KAAtC,CAAD,CAArB,CAAD,EAAuE,IAAvE,CAApB;AACH;AAED,OAAO,SAAS2C,mBAAT,CAA6B5D,YAA7B,EAA0DiB,KAA1D,EAA8F;AACjG,SAAOhC,aAAa,CAAC+C,OAAO,CAACC,OAAR,CAAgBjD,KAAK,CAACc,WAAW,CAAC,EAAD,EAAKE,YAAL,CAAX,CAA8BE,KAA9B,CAAoC,CAApC,EAAuCe,KAAvC,CAAD,CAArB,CAAD,EAAwE,IAAxE,CAApB;AACH;AAED,OAAO,SAAS4C,gBAAT,CAA0B5C,KAA1B,EAA8D;AACjE,SAAOhC,aAAa,CAAC+C,OAAO,CAACC,OAAR,CAAgBjD,KAAK,CAACc,WAAW,CAAC,CAAD,CAAX,CAAeI,KAAf,CAAqB,CAArB,EAAwBe,KAAxB,CAAD,CAArB,CAAD,EAAyD,IAAzD,CAApB;AACH;AAED,OAAO,SAAS6C,iBAAT,CAA2B7C,KAA3B,EAA+D;AAClE,SAAOe,OAAO,CAACC,OAAR,CAAgBjD,KAAK,CAACQ,UAAU,CAACU,KAAX,CAAiB,CAAjB,EAAoBe,KAApB,CAAD,CAArB,CAAP;AACH;AAED,OAAO,SAAS8C,oBAAT,CACHC,KADG,EAEH5D,OAFG,EAGiC;AACpC,MAAM6D,QAAQ,GAAGD,KAAK,CAACE,WAAN,EAAjB;;AACA,MAAMC,UAAU;AACZC,IAAAA,aAAa,EAAE,CADH;AAEZC,IAAAA,eAAe,EAAE;AAFL,KAGTjE,OAHS,CAAhB;;AAMA,MAAMkE,cAAc,GAAG9E,UAAU,CAACgB,MAAX,CAAkB,UAAC2B,CAAD;AAAA,WAAOA,CAAC,CAACL,IAAF,CAAOoC,WAAP,GAAqBrC,QAArB,CAA8BoC,QAA9B,CAAP;AAAA,GAAlB,CAAvB;AACA,MAAMM,gBAAgB,GAAG3E,kBAAkB,CAACY,MAAnB,CAA0B,UAAC2B,CAAD;AAAA,WAAOA,CAAC,CAACL,IAAF,CAAOoC,WAAP,GAAqBrC,QAArB,CAA8BoC,QAA9B,CAAP;AAAA,GAA1B,CAAzB;AAEA,SAAOjC,OAAO,CAACC,OAAR,CAAgB;AACnB1C,IAAAA,QAAQ,EAAE+E,cAAc,CAACpE,KAAf,CAAqB,CAArB,EAAwBiE,UAAU,CAACC,aAAnC,CADS;AAEnBI,IAAAA,UAAU,EAAED,gBAAgB,CAACrE,KAAjB,CAAuB,CAAvB,EAA0BiE,UAAU,CAACE,eAArC,EAAsDnC,GAAtD,CAA0D,UAACC,CAAD;AAAA,aAAO7C,eAAe,CAAC6C,CAAD,CAAtB;AAAA,KAA1D;AAFO,GAAhB,CAAP;AAIH","sourcesContent":["// application\nimport { AbstractFilterBuilder } from '~/fake-server/filters/abstract-filter-builder';\nimport { CategoryFilterBuilder } from '~/fake-server/filters/category-filter-builder';\nimport { CheckFilterBuilder } from '~/fake-server/filters/check-filter-builder';\nimport { clone, delayResponse, error } from '~/fake-server/utils';\nimport { ColorFilterBuilder } from '~/fake-server/filters/color-filter-builder';\nimport { getNextReviewId, reviews } from '~/fake-server/database/reviews';\nimport { IFilterValues, IListOptions, IReviewsList } from '~/interfaces/list';\nimport { IProductsList, IProduct } from '~/interfaces/product';\nimport { IReview } from '~/interfaces/review';\nimport { prepareCategory } from '~/fake-server/endpoints/categories';\nimport { products as dbProducts } from '~/fake-server/database/products';\nimport { RadioFilterBuilder } from '~/fake-server/filters/radio-filter-builder';\nimport { RangeFilterBuilder } from '~/fake-server/filters/range-filter-builder';\nimport { RatingFilterBuilder } from '~/fake-server/filters/rating-filter-builder';\nimport { shopCategoriesList } from '~/fake-server/database/categories';\nimport { VehicleFilterBuilder } from '~/fake-server/filters/vehicle-filter-builder';\nimport {\n    IAddProductReviewData,\n    IGetSearchSuggestionsOptions,\n    IGetSearchSuggestionsResult,\n} from '~/api/base';\n\nfunction getProducts(shift: number, categorySlug: string | null = null): IProduct[] {\n    let shiftValue = shift;\n\n    switch (categorySlug) {\n    case 'tires-wheels':\n    case 'power-tools': shiftValue += 5; break;\n    case 'interior-parts':\n    case 'hand-tools': shiftValue += 10; break;\n    case 'engine-drivetrain':\n    case 'plumbing': shiftValue += 15; break;\n    default:\n    }\n\n    return [...dbProducts.slice(shiftValue), ...dbProducts.slice(0, shiftValue)];\n}\n\nexport function getProductsList(\n    options: IListOptions = {},\n    filterValues: IFilterValues = {},\n): Promise<IProductsList> {\n    const filters: AbstractFilterBuilder[] = [\n        new CategoryFilterBuilder('category', 'Categories'),\n        new VehicleFilterBuilder('vehicle', 'Vehicle'),\n        new RangeFilterBuilder('price', 'Price'),\n        new CheckFilterBuilder('brand', 'Brand'),\n        new RadioFilterBuilder('discount', 'With Discount'),\n        new RatingFilterBuilder('rating', 'Rating'),\n        new ColorFilterBuilder('color', 'Color'),\n    ];\n\n    let products = dbProducts.slice(0);\n\n    filters.forEach((filter) => filter.makeItems(products, filterValues[filter.slug]));\n\n    // Calculate items count for filter values.\n    filters.forEach((filter) => filter.calc(filters));\n\n    // Apply filters to products list.\n    products = products.filter((product) => filters.reduce<boolean>((mr, filter) => mr && filter.test(product), true));\n\n    const page = options?.page || 1;\n    const limit = options?.limit || 16;\n    const sort = options?.sort || 'default';\n    const total = products.length;\n    const pages = Math.ceil(products.length / limit);\n    const from = (page - 1) * limit + 1;\n    const to = Math.min(page * limit, total);\n\n    // Sort items array.\n    products = products.sort((a, b) => {\n        if (['name_asc', 'name_desc'].includes(sort)) {\n            if (a.name === b.name) {\n                return 0;\n            }\n\n            return (a.name > b.name ? 1 : -1) * (sort === 'name_asc' ? 1 : -1);\n        }\n\n        return 0;\n    });\n\n    const items = products.slice(from - 1, to) as unknown as Array<IProduct>;\n\n    return delayResponse(Promise.resolve({\n        items,\n        page,\n        limit,\n        sort,\n        total,\n        pages,\n        from,\n        to,\n        filters: filters.map((x) => x.build()),\n    }), 350);\n}\n\nexport function getProductBySlug(slug: string): Promise<IProduct> {\n    const product = dbProducts.find((x) => x.slug === slug);\n\n    if (!product) {\n        return error('Page Not Found');\n    }\n\n    return Promise.resolve(clone(product));\n}\n\nexport function getProductReviews(productId: number, options?: IListOptions): Promise<IReviewsList> {\n    let items = reviews.slice(0);\n\n    items.sort((a, b) => {\n        if (a.date > b.date) {\n            return -1;\n        }\n        if (a.date < b.date) {\n            return 1;\n        }\n\n        return 0;\n    });\n\n    const page = options?.page || 1;\n    const limit = options?.limit || 8;\n    const sort = options?.sort || 'default';\n    const total = items.length;\n    const pages = Math.ceil(items.length / limit);\n    const from = (page - 1) * limit + 1;\n    const to = page * limit;\n\n    items = items.slice(from - 1, to) as unknown as Array<IReview>;\n\n    return Promise.resolve({\n        items,\n        page,\n        limit,\n        sort,\n        total,\n        pages,\n        from,\n        to,\n    });\n}\n\nexport function addProductReview(productId: number, data: IAddProductReviewData): Promise<IReview> {\n    const review: IReview = {\n        id: getNextReviewId(),\n        date: (new Date()).toISOString().substr(0, 10),\n        author: data.author,\n        avatar: '/images/avatars/avatar-2.jpg',\n        rating: data.rating,\n        content: data.content,\n    };\n\n    reviews.push(review);\n\n    return delayResponse(Promise.resolve(review));\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function getProductAnalogs(productId: number): Promise<IProduct[]> {\n    const slugs: string[] = [\n        'sunset-brake-kit',\n        'specter-brake-kit',\n        'brake-kit',\n    ];\n    const analogs: IProduct[] = dbProducts.filter((x) => slugs.includes(x.slug));\n\n    return Promise.resolve(clone(analogs));\n}\n\nexport function getRelatedProducts(productId: number, limit: number): Promise<IProduct[]> {\n    return Promise.resolve(clone(dbProducts.slice(0, limit)));\n}\n\nexport function getFeaturedProducts(categorySlug: string | null, limit: number): Promise<IProduct[]> {\n    return delayResponse(Promise.resolve(clone(getProducts(0, categorySlug).slice(0, limit))), 1000);\n}\n\nexport function getPopularProducts(categorySlug: string | null, limit: number): Promise<IProduct[]> {\n    return delayResponse(Promise.resolve(clone(getProducts(6, categorySlug).slice(0, limit))), 1000);\n}\n\nexport function getTopRatedProducts(categorySlug: string | null, limit: number): Promise<IProduct[]> {\n    return delayResponse(Promise.resolve(clone(getProducts(12, categorySlug).slice(0, limit))), 1000);\n}\n\nexport function getSpecialOffers(limit: number): Promise<IProduct[]> {\n    return delayResponse(Promise.resolve(clone(getProducts(8).slice(0, limit))), 1000);\n}\n\nexport function getLatestProducts(limit: number): Promise<IProduct[]> {\n    return Promise.resolve(clone(dbProducts.slice(0, limit)));\n}\n\nexport function getSearchSuggestions(\n    query: string,\n    options?: IGetSearchSuggestionsOptions,\n): Promise<IGetSearchSuggestionsResult> {\n    const queryVal = query.toLowerCase();\n    const optionsVal = {\n        limitProducts: 4,\n        limitCategories: 4,\n        ...options,\n    };\n\n    const resultProducts = dbProducts.filter((x) => x.name.toLowerCase().includes(queryVal));\n    const resultCategories = shopCategoriesList.filter((x) => x.name.toLowerCase().includes(queryVal));\n\n    return Promise.resolve({\n        products: resultProducts.slice(0, optionsVal.limitProducts),\n        categories: resultCategories.slice(0, optionsVal.limitCategories).map((x) => prepareCategory(x)),\n    });\n}\n"]},"metadata":{},"sourceType":"module"}